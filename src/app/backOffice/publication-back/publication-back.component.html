<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Users / Profile - NiceAdmin Bootstrap Template</title>
  <meta content="" name="description">
  <meta content="" name="keywords">


</head>

<body>

<!-- ======= Header ======= -->
<app-nav-bar-back></app-nav-bar-back>
<!-- ======= Sidebar ======= -->
  <app-side-bar-back></app-side-bar-back>
<main id="main" class="main">

  <div class="pagetitle">
    <h1>Publications</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item">Users</li>
        <li class="breadcrumb-item active">Profile</li>
      </ol>
    </nav>
  </div>
 
  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#basicModal"><i class="bi bi-star me-1" ></i> new Post</button>
  <section class="section profile">

    <div class="card" *ngFor="let p of pubList">
        <div class="card-header">
        <button type="button" class="btn btn-danger" (click)="deletePost(p.idPublication)"><i class="bi bi-exclamation-octagon"></i></button> 
        <button type="button" class="btn btn-dark" (click)="setupdate(p)" data-bs-toggle="modal" data-bs-target="#basicModal1"><i class="bi bi-folder"></i></button>
        <button type="button" class="btn btn-warning" (click)="signalPost(p.idPublication)" ><i class="bi bi-exclamation-triangle"></i>{{p.signalPosts.length}}</button> 
      
        <button type="button" class="btn btn-light"  style="   position:relative; 
        display:inline-block; 
        float:right;" (click)="getscore(p.idPublication)">Rate : {{rate}}</button>
      <button type="button" class="btn btn-success" style="   position:relative; 
        display:inline-block; 
        float:right;" (click)="postComment(p)" data-bs-toggle="modal" data-bs-target="#basicModal2">Comments : {{p.listOfComments.length}}</button>
      

    </div>
        <div class="card-body">
          <h5 class="card-title">{{p.sujet}}</h5>
         {{p.contenu}}

       <h4>your React :</h4>  
         <div *ngFor="let r of p.reacts">
 
             <span class="badge bg-secondary" *ngIf="r.reactEnum == 'Wow'">Wow</span>
             <span class="badge bg-success" *ngIf="r.reactEnum == 'Haha'">Haha</span>
             <span class="badge bg-danger" *ngIf="r.reactEnum == 'Love'">Love</span>
             <span class="badge bg-warning text-dark" *ngIf="r.reactEnum == 'Angry'">Angry</span>
             <span class="badge bg-info text-dark" *ngIf="r.reactEnum == 'Like'">Like</span>
             <span class="badge bg-light text-dark" *ngIf="r.reactEnum == 'Sad'">Sad</span>
             <span class="badge bg-dark" *ngIf="r.reactEnum == 'Dislike'">Dislike</span>
           </div>
        </div>
        <div class="card-footer">
                <button type="button" class="btn btn-secondary rounded-pill" (click)="addreact(p.idPublication,'Wow')">Wow</button>
                <button type="button" class="btn btn-success rounded-pill" (click)="addreact(p.idPublication,'Haha')">Haha</button>
                <button type="button" class="btn btn-danger rounded-pill" (click)="addreact(p.idPublication,'Love')">Love</button>
                <button type="button" class="btn btn-warning rounded-pill"(click)="addreact(p.idPublication,'Angry')">Angry</button>
                <button type="button" class="btn btn-info rounded-pill"(click)="addreact(p.idPublication,'Like')">Like</button>
                <button type="button" class="btn btn-light rounded-pill"(click)="addreact(p.idPublication,'Sad')">Sad</button>
                <button type="button" class="btn btn-dark rounded-pill"(click)="addreact(p.idPublication,'Dislike')">Dislike</button>


                    <select  [(ngModel)]="select"   class="form-select" aria-label="Default select example" *ngIf="rateb">
                      <option  selected="">Open this select menu</option>
                      <option value="0">Delete</option>
                      <option value="1" >One</option>
                      <option value="2">Two</option>
                      <option value="3">Three</option>
                      <option value="4">four</option>
                      <option value="5">five</option>

                    </select>
                <button *ngIf="rateb" type="button" (click)="addrate(p.idPublication,'1')" style="   position:relative; 
                display:inline-block; 
                float:right;" class="btn btn-outline-warning">save</button>
                <button type="button" (click)="showrate()" style="   position:relative; 
                display:inline-block; 
                float:right;" class="btn btn-outline-warning">Rate</button>
        </div>
      </div> 

  </section>

</main><!-- End #main -->

<!-- ======= Footer ======= -->
<app-footer-back></app-footer-back>
<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>


</body>

</html>
<div class="modal fade" id="basicModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Add</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form>
                <div class="row mb-3">

                  <label  name="name" class="col-sm-2 col-form-label">subject</label>
                  <div class="col-sm-10">
                    <input type="text" class="form-control"  [(ngModel)]="pubadd.sujet" [ngModelOptions]="{standalone: true}">
                  </div>
                </div>
                  <div class="row mb-3">
                    <label  name="decv" class="col-sm-2 col-form-label">content</label>
                    <div class="col-sm-10">
                      <textarea class="form-control" style="height: 100px"  [(ngModel)]="pubadd.contenu" [ngModelOptions]="{standalone: true}" ></textarea>
                    </div>
                  </div>
              </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary"  (click)="addpost()">Save changes</button>
        </div>
      </div>
    </div>
  </div><!-- End Basic Modal-->

  <div class="modal fade" id="basicModal1" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Update</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form>
                <div class="row mb-3">

                  <label  name="name" class="col-sm-2 col-form-label">subject</label>
                  <div class="col-sm-10">
                    <input type="text" class="form-control"  [(ngModel)]="pubupdate.sujet" [ngModelOptions]="{standalone: true}">
                  </div>
                </div>
                  <div class="row mb-3">
                    <label  name="decv" class="col-sm-2 col-form-label">content</label>
                    <div class="col-sm-10">
                      <textarea class="form-control" style="height: 100px"  [(ngModel)]="pubupdate.contenu" [ngModelOptions]="{standalone: true}" ></textarea>
                    </div>
                  </div>
              </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary"  (click)="updatepost()">Save changes</button>
        </div>
      </div>
    </div>
  </div><!-- End Basic Modal-->

  <div class="modal fade" id="basicModal2" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Comments</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <button type="button" class="btn btn-success" (click)="affcom()">new comment</button>
            <h4 style="color: red;">{{errmsg}}</h4>
            <form *ngIf="divcomm">
                <div class="row mb-3" >
                </div>
                  <div class="row mb-3">
                    <label  name="decv" class="col-sm-2 col-form-label">content</label>
                    <div class="col-sm-10">
                      <textarea class="form-control" style="height: 100px"  [(ngModel)]="commadd.content" [ngModelOptions]="{standalone: true}" ></textarea>
                    </div>
                  </div>
                
                  <button type="button" class="btn btn-success" (click)="addcoment()">save</button>

              </form>

                <div class="card-body" *ngFor="let c of pubComm.listOfComments">
                    <h5 class="card-title">Comment :</h5>

                   {{c.content}}
                </div>
                
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div><!-- End Basic Modal-->